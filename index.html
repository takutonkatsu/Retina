<html lang="ja">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-04Q9P2MCL8"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-04Q9P2MCL8');
    </script>

    <script type="application/ld+json">
    {
    "@context": "https://schema.org",
    "@type": "VideoGame",
    "name": "Retina",
    "description": "RGB数値を推測して色彩感覚を鍛えるブラウザゲーム。対戦モード対応。",
    "genre": ["Puzzle", "Educational"],
    "url": "https://takutonkatsu.github.io/Retina/",
    "image": "https://takutonkatsu.github.io/Retina/share_img.png",
    "author": {
        "@type": "Person",
        "name": "Takutonkatsu"
    },
    "operatingSystem": "Web Browser",
    "applicationCategory": "Game",
    "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "JPY"
    }
    }
    </script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retina | 色彩感覚テスト - 色彩感覚を、数値化せよ。</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;400;700;900&family=JetBrains+Mono:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <link rel="shortcut icon" href="favicon.ico">
    <link rel="icon" type="image/png" href="Retina_icon_background.png">
    <link rel="apple-touch-icon" href="Retina_icon_background.png">
    
    <meta name="description" content="【登録不要・無料】Retina（レティナ）は、表示された色のRGB数値を推測して色彩感覚を鍛えるWebゲームです。エンジニアやデザイナーのスキルアップ、暇つぶしに最適。友達と対戦できるVersusモード搭載。"><link rel="stylesheet" href="style.css">
    <meta property="og:url" content="https://takutonkatsu.github.io/Retina/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Retina">
    <meta property="og:description" content="Test your color sense.">
    <meta property="og:site_name" content="Retina">
    <meta property="og:image" content="https://takutonkatsu.github.io/Retina/share_img.png">
</head>
<body>

    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>

    <header class="app-header">
        <div class="logo" id="app-logo" onclick="AppController.returnToMenu()">
            <img src="Retina_icon.png" alt="icon" class="logo-icon" id="source-logo-icon">
            <span class="logo-text">Retina</span>
        </div>
        <button id="back-btn" class="nav-btn hidden" onclick="AppController.returnToMenu()">
            <span class="icon">✕</span> Close
        </button>
    </header>

    <main class="container">

        <section id="screen-menu" class="screen active fade-in">
            <div class="hero-section">
                <p class="hero-subtitle">Test your color sense.</p>
                <h1 class="hero-title">Master the <span class="char-r">R</span><span class="char-g">G</span><span class="char-b">B</span></h1>
            </div>

            <div class="daily-section" onclick="AppController.startGameMode('daily')">
                <div class="daily-main-container">
                    <div id="menu-daily-color-preview" class="daily-preview-large"></div>
                    <div class="daily-content">
                        <div class="daily-label">TODAY'S CHALLENGE</div>
                        <div class="daily-date" id="menu-daily-date">202X.XX.XX</div>
                        <h2 class="daily-title">Daily Color</h2>
                        <p class="daily-desc">世界共通の難問に、今すぐ挑戦せよ。</p>
                    </div>
                </div>
                <div class="daily-status" id="menu-daily-status">PLAY NOW ►</div>
            </div>

            <div class="menu-grid">
                <div class="game-card card-origin" onclick="AppController.startGameMode('origin')">
                    <div class="std-badge">STANDARD</div>
                    <div class="card-icon">🧠</div>
                    <div class="card-content">
                        <h3>Origin</h3>
                        <p>数値のみで挑む真剣勝負</p>
                        <div class="record-badge" id="menu-original-record">NO RECORD</div>
                    </div>
                </div>

                <div class="game-card card-rush" onclick="AppController.startGameMode('rush')">
                    <div class="card-icon">⚡</div>
                    <div class="card-content">
                        <h3>Rush</h3>
                        <p>時間制限付きのスピード勝負</p>
                        <div class="record-badge" id="menu-rush-record">NO RECORD</div>
                    </div>
                </div>

                <div class="game-card card-survival" onclick="AppController.startGameMode('survival')">
                    <div class="card-icon">🔥</div>
                    <div class="card-content">
                        <h3>Survival</h3>
                        <p>極限へ至るサバイバル</p>
                        <div class="record-badge" id="menu-survival-record">Start: Stage 1</div>
                    </div>
                </div>

                <div class="game-card card-versus" onclick="AppController.startGameMode('versus')">
                    <div class="card-icon">⚔️</div>
                    <div class="card-content">
                        <h3>Versus</h3>
                        <p>友達と競うリアルタイムバトル</p>
                        <div class="record-badge">2-4 PLAYERS</div>
                    </div>
                </div>
            </div>
            
            <div id="another-world-entrance" class="hidden text-center" style="margin-top: 40px;">
                <button class="glitch-btn" onclick="AppController.startGameMode('anotherworld')">ENTER THE VOID</button>
            </div>
            <div id="god-badge-area" class="text-center" style="margin-top: 20px; opacity: 0.8;"></div>
            
            <div class="about-section">
                <div class="about-title">How to Play</div>
                <div class="about-card">
                    <h4>What is RGB?</h4>
                    <p>光の三原色（Red/Green/Blue）を0〜255の数値で表現するシステム。このゲームは、あなたの網膜と脳内変換の精度を極限まで高めるトレーニングツールです。</p>
                </div>
                <div class="about-card about-origin">
                    <h4>Origin</h4>
                    <p>視覚的なヒント無しでRGB数値を導き出す、ストイックなスタンダードモード。純粋な知識と色彩感覚が試される、Retinaの真髄です。</p>
                </div>
                <div class="about-card about-rush">
                    <h4>Rush</h4>
                    <p>60秒間のタイムアタック。高精度（95%以上）で回答すると残り時間が増え、ミス（90%未満）すると時間が減ります。正確さと速さの両立が鍵。</p>
                </div>
                <div class="about-card about-survival">
                    <h4>Survival</h4>
                    <p>ステージ進行と共に厳しくなるノルマ。一度のミスも許されないプレッシャーの中で、自身の限界到達点を探る全25ステージのサバイバル。</p>
                </div>
                <div class="about-card about-versus">
                    <h4>Versus</h4>
                    <p>2〜4人で遊べるリアルタイムバトル。人数に合わせて部屋を作り、同じ色を同時に解いて精度を競い合います。</p>
                </div>
                <div class="about-card">
                    <h4>About "Ao5" (Average of 5)</h4>
                    <p>直近5回の記録のうち、最高値と最低値を除いた3回の平均値。スピードキューブ等で用いられる、まぐれを除外した実力を測る指標です。</p>
                </div>
            </div>

            <div style="text-align:center; margin-top:30px; margin-bottom: 0;">
                <button onclick="Tutorial.start()" class="btn-text" style="font-size: 0.8rem; opacity: 0.7;">REPLAY TUTORIAL</button>
            </div>
        </section>

        <section id="screen-daily" class="screen fade-in">
            <div class="game-header"><h2 class="game-title color-daily">Daily Color</h2><div id="daily-date-display" class="digital-timer" style="font-size:1rem;">202X.XX.XX</div></div>
            <div class="single-color-display"><div id="daily-question-color" class="color-box large-box"><span class="overlay-text">?</span></div></div>
            <div class="slider-container glass-panel">
                <div class="slider-row"><label class="label-r">R</label><input type="range" id="daily-R" class="custom-range range-r" min="0" max="255" value="128"><span id="daily-val-R" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-g">G</label><input type="range" id="daily-G" class="custom-range range-g" min="0" max="255" value="128"><span id="daily-val-G" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-b">B</label><input type="range" id="daily-B" class="custom-range range-b" min="0" max="255" value="128"><span id="daily-val-B" class="val-num">128</span></div>
            </div>
            <button id="daily-guess-btn" class="main-action-btn">GUESS</button>
        </section>

        <section id="screen-result-daily" class="screen fade-in result-screen daily-result-bg">
            <div class="game-header" style="margin-bottom:20px;">
                <h2 class="game-title color-daily">Daily Color</h2>
                <div class="daily-res-date" id="daily-res-date" style="font-size:1rem;">202X.XX.XX</div>
            </div>

            <div class="score-display"><span class="score-label">SCORE</span><h1 id="daily-score">0%</h1></div>
            
            <div class="daily-compare-container">
                <div class="daily-color-block">
                    <p class="compare-label">TARGET</p>
                    <div id="daily-ans-color" class="daily-big-box"></div>
                    <span id="daily-ans-text" class="daily-rgb-text">0, 0, 0</span>
                </div>
                <div class="daily-color-block">
                    <p class="compare-label">YOU</p>
                    <div id="daily-your-color" class="daily-big-box"></div>
                    <span id="daily-your-text" class="daily-rgb-text">0, 0, 0</span>
                </div>
            </div>
            
            <div style="text-align:center; margin-bottom:30px; margin-top:20px; color:rgba(255,255,255,0.7); font-size:0.9rem;">
                Next Color in: <span id="daily-next-timer" style="color:#fff; font-family:var(--font-mono); font-weight:bold;">--:--:--</span>
            </div>

            <div class="modal-buttons">
                <button onclick="DailyGame.generateShareImage()" class="btn-share">
                    <span class="share-icon">📤</span> SHARE RESULT
                </button>
                <button onclick="AppController.returnToMenu()" class="btn-text">BACK TO MENU</button>
            </div>
        </section>

        <section id="screen-rush" class="screen fade-in">
            <div style="margin-bottom:20px;">
                <div class="game-header" style="margin-bottom:5px;">
                    <h2 class="game-title color-rush">Rush</h2>
                </div>
                <div class="rush-header-grid">
                    <div class="rush-item-left">
                        <span class="rush-label">TIME</span>
                        <div id="rush-timer" class="rush-val-time" style="text-align:left;">60.00</div>
                    </div>
                    <div class="rush-item-right">
                        <span class="rush-label">SCORE</span>
                        <div id="rush-current-score" class="rush-val-score">0</div>
                    </div>
                </div>
            </div>

            <div id="rush-combo-display" class="rush-combo hidden">0 COMBO</div>
            <div id="rush-effect-container" style="position:fixed; top:30%; left:50%; transform:translate(-50%,-50%); pointer-events:none; z-index:100;"></div>
            <div class="color-display-area">
                <div class="color-panel"><span class="panel-label">TARGET</span><div id="rush-question-color" class="color-box"><span class="overlay-text">?</span></div></div>
                <div class="color-panel"><span class="panel-label">YOURS</span><div id="rush-input-color" class="color-box"></div></div>
            </div>
            <div class="slider-container glass-panel">
                <div class="slider-row"><label class="label-r">R</label><input type="range" id="rush-R" class="custom-range range-r" min="0" max="255" value="128"><span id="rush-val-R" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-g">G</label><input type="range" id="rush-G" class="custom-range range-g" min="0" max="255" value="128"><span id="rush-val-G" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-b">B</label><input type="range" id="rush-B" class="custom-range range-b" min="0" max="255" value="128"><span id="rush-val-B" class="val-num">128</span></div>
            </div>
            <button id="rush-guess-btn" class="main-action-btn">GUESS</button>
        </section>

        <section id="screen-result-rush" class="screen fade-in result-screen">
            <div class="game-header"><h2 class="game-title color-rush">Rush</h2></div>
            
            <div id="rush-new-record" class="new-record hidden">NEW RECORD!</div>
            <div class="score-display"><span class="score-label">SCORE</span><h1 id="rush-final-score">0</h1></div>
            
            <div class="stats-row">
                <div class="stat-box"><span class="stat-label">Correct</span><span id="rush-count" class="stat-value">0</span></div>
                <div class="stat-box"><span class="stat-label">MAX COMBO</span><span id="rush-max-combo" class="stat-value">0</span></div>
                <div class="stat-box"><span class="stat-label">Best</span><span id="rush-best" class="stat-value highlight">--</span></div>
            </div>
            <div class="modal-buttons">
                <button onclick="RushGame.generateShareImage()" class="btn-share"><span class="share-icon">📤</span> SHARE RESULT</button>
                
                <button onclick="RushGame.initialize()" class="btn-primary"><span class="btn-icon">↻</span> RETRY</button>
                <button onclick="RushGame.clearSaveData()" class="btn-text" style="font-size:0.7rem; color:#555;">Reset Data</button>
            </div>

            <div id="rush-history" class="history-log"></div>
        </section>

        <section id="screen-origin" class="screen fade-in">
            <div class="game-header"><h2 class="game-title color-origin">Origin</h2></div>
            <div class="single-color-display"><div id="origin-question-color" class="color-box large-box"><span class="overlay-text">?</span></div></div>
            <div class="slider-container glass-panel">
                <div class="slider-row"><label class="label-r">R</label><input type="range" id="origin-R" class="custom-range range-r" min="0" max="255" value="128"><span id="origin-val-R" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-g">G</label><input type="range" id="origin-G" class="custom-range range-g" min="0" max="255" value="128"><span id="origin-val-G" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-b">B</label><input type="range" id="origin-B" class="custom-range range-b" min="0" max="255" value="128"><span id="origin-val-B" class="val-num">128</span></div>
            </div>
            <button id="origin-guess-btn" class="main-action-btn">GUESS</button>
        </section>

        <section id="screen-result-origin" class="screen fade-in result-screen">
            <div class="game-header"><h2 class="game-title color-origin">Origin</h2></div>
            
            <div id="origin-new-record" class="new-record hidden">NEW RECORD!</div>
            <div class="score-display"><span class="score-label">SCORE</span><h1 id="origin-score">0%</h1></div>
            <div class="compare-row">
                <div class="compare-item"><p class="compare-label">TARGET</p><div id="origin-ans-color" class="mini-box"></div><span id="origin-ans-text"></span></div>
                <div class="compare-item"><p class="compare-label">YOU</p><div id="origin-your-color" class="mini-box"></div><span id="origin-your-text"></span></div>
            </div>
            <div class="stats-row">
                <div class="stat-box"><span class="stat-label">BEST</span><span id="origin-pb" class="stat-value highlight">--</span></div>
                <div class="stat-box"><span class="stat-label">AO5 BEST</span><span id="origin-ao5" class="stat-value">--</span></div>
            </div>
            <div class="modal-buttons">
                <button onclick="OriginGame.proceedToNextColor()" class="btn-primary"><span class="btn-icon">▶</span> NEXT COLOR</button>
                <button onclick="OriginGame.generateShareImage()" class="btn-share"><span class="share-icon">📤</span> SHARE RESULT</button>
                <button onclick="OriginGame.clearSaveData()" class="btn-text" style="font-size:0.7rem; color:#555;">Reset Data</button>
            </div>
            <div id="origin-history" class="history-log"></div>
        </section>

        <section id="screen-survival" class="screen fade-in">
            <div class="game-header"><h2 class="game-title color-survival">Survival</h2></div>
            <div class="challenge-status-bar">
                <div class="challenge-info-top">
                    <div><span class="stage-title">STAGE</span><div class="stage-number-big" id="survival-stage-num">01</div></div>
                    <div class="goal-display"><span class="goal-label">GOAL</span><div class="goal-val" id="survival-aim-score">90.00%</div></div>
                </div>
            </div>
            <div class="single-color-display"><div id="survival-sample" class="color-box large-box"><span class="overlay-text">?</span></div></div>
            <div class="slider-container glass-panel">
                <div class="slider-row"><label class="label-r">R</label><input type="range" id="survival-R" class="custom-range range-r" min="0" max="255" value="128"><span id="survival-val-R" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-g">G</label><input type="range" id="survival-G" class="custom-range range-g" min="0" max="255" value="128"><span id="survival-val-G" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-b">B</label><input type="range" id="survival-B" class="custom-range range-b" min="0" max="255" value="128"><span id="survival-val-B" class="val-num">128</span></div>
            </div>
            <button id="survival-guess-btn" class="main-action-btn">GUESS</button>
        </section>
        <section id="screen-result-survival" class="screen fade-in result-screen">
            <div class="game-header"><h2 class="game-title color-survival">Survival</h2></div>
            
            <h2 id="survival-score-text" class="result-title-big"></h2>
            
            <div class="result-score-block">
                <div class="score-item">
                    <span class="label">SCORE</span>
                    <span id="survival-result-score" class="val"></span>
                </div>
                <div class="score-divider">/</div>
                <div class="score-item">
                    <span class="label">GOAL</span>
                    <span id="survival-result-goal" class="val"></span>
                </div>
            </div>

            <div id="survival-new-record" class="new-record hidden">NEW RECORD!</div>

            <div class="compare-row">
                <div class="compare-item"><p class="compare-label">TARGET</p><div id="survival-ans-color" class="mini-box"></div><span id="survival-ans-text"></span></div>
                <div class="compare-item"><p class="compare-label">YOU</p><div id="survival-your-color" class="mini-box"></div><span id="survival-your-text"></span></div>
            </div>

            <div class="modal-buttons">
                <button id="survival-next-btn" class="btn-primary">NEXT STAGE</button>
                <button onclick="AppController.returnToMenu()" class="btn-text">EXIT GAME</button>
            </div>

            <div style="margin-top: 15px; font-size: 0.8rem; color: #888;">Max Stage: <span id="survival-pb" style="color:#fff; font-weight:bold;"></span></div>
            <div id="survival-history" class="history-log"></div>
        </section>

        <section id="screen-anotherworld" class="screen fade-in">
            <div class="game-header"><h2 class="game-title color-storage">Color Storage</h2></div>
            <div class="slider-container glass-panel">
                <div class="color-box large-box" id="another-input-color" style="margin-bottom:20px;"></div>
                <div class="slider-row"><label class="label-r">R</label><input type="range" id="another-R" class="custom-range range-r" min="0" max="255" value="128"><span id="another-val-R" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-g">G</label><input type="range" id="another-G" class="custom-range range-g" min="0" max="255" value="128"><span id="another-val-G" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-b">B</label><input type="range" id="another-B" class="custom-range range-b" min="0" max="255" value="128"><span id="another-val-B" class="val-num">128</span></div>
            </div>
            <button class="main-action-btn" onclick="AnotherGame.saveColorToStorage()">SAVE COLOR</button>
            <button onclick="AnotherGame.generateShareImage()" class="btn-share" style="margin-top:15px; width:100%;"><span class="share-icon">📤</span> SHARE ALL</button>
            <div id="another-history" class="history-log" style="margin-top:30px;"></div>
            <div style="text-align:center; margin-top:20px;"><button onclick="AnotherGame.clearSaveData()" class="btn-text" style="color:#555;">Delete All</button></div>
        </section>

        <section id="screen-versus-menu" class="screen fade-in" style="text-align:center;">
            <div class="game-header"><h2 class="game-title color-versus">Versus</h2></div>
            
            <div class="setting-area">
                <div style="margin-bottom: 20px; border-bottom: 1px dashed rgba(255,255,255,0.1); padding-bottom: 15px;">
                    <p class="input-label">YOUR NAME (Max 6)</p>
                    <input type="text" id="versus-name-input" maxlength="6" placeholder="Player" class="name-input">
                </div>
                
                <div>
                    <label style="color:#aaa; font-size:0.8rem; display:block; margin-bottom:5px;">GOAL (1 - 99)</label>
                    <input type="number" id="versus-goal-input" class="name-input" placeholder="5" value="5" min="1" max="99" style="width:100px; font-size:1.5rem; border-color:var(--primary-multi);">
                    </div>
            </div>

            <div class="menu-grid">
                <div class="game-card" style="border-color:var(--primary-multi);" onclick="VersusGame.createRoom()">
                    <div class="card-icon">🏠</div><div class="card-content"><h3>CREATE ROOM</h3><p>部屋を作成</p></div>
                </div>
                <div class="game-card" style="border-color:var(--primary-multi);" onclick="VersusGame.displayJoinScreen()">
                    <div class="card-icon">🔑</div><div class="card-content"><h3>JOIN ROOM</h3><p>部屋に参加</p></div>
                </div>
            </div>
        </section>

        <section id="screen-versus-join" class="screen fade-in" style="text-align:center;">
            <div class="game-header"><h2 class="game-title color-versus">Join Room</h2></div>
            <p>Enter 4-digit Room ID</p>
            <input type="tel" pattern="\d*" maxlength="4" id="versus-room-input" placeholder="0000" class="room-id-input" style="border-bottom-color:var(--primary-multi);">
            <button class="main-action-btn" onclick="VersusGame.joinRoom()">JOIN</button>
        </section>

        <section id="screen-versus-lobby" class="screen fade-in" style="text-align:center;">
            <div class="game-header"><h2 class="game-title color-versus">Versus</h2></div>
            <p>Share this Room ID</p>
            <div id="versus-room-id-display" class="room-id-display" style="color:var(--primary-multi);">----</div>
            <div class="loading-spinner"></div>
            <div id="versus-lobby-goal" style="color:#fff; font-family:var(--font-mono); margin-bottom:15px; font-weight:bold;">GOAL: ---</div>
            
            <div style="margin-top:20px; font-size:1rem; color:#ddd; line-height:1.6;">
                <p id="versus-p1-name" style="border-bottom:1px solid #333; padding:5px;">Host: ---</p>
                <p id="versus-p2-name" style="border-bottom:1px solid #333; padding:5px;">Guest 1: ---</p>
                <p id="versus-p3-name" style="border-bottom:1px solid #333; padding:5px;">Guest 2: ---</p>
                <p id="versus-p4-name" style="border-bottom:1px solid #333; padding:5px;">Guest 3: ---</p>
            </div>

            <button onclick="VersusGame.shareInviteLink()" class="btn-share" style="margin:20px auto; font-size:0.9rem; padding:10px 20px;">
                <span class="share-icon">📤</span> INVITE FRIENDS
            </button>

            <div id="host-start-area" class="hidden" style="margin-top:20px;">
                <button onclick="VersusGame.hostStartGame()" class="main-action-btn" style="background:var(--primary-multi);">START GAME</button>
            </div>
            <p id="versus-status-text" class="status-text" style="margin-top:20px;">Waiting for players...</p>
        </section>

        <section id="screen-versus-battle" class="screen fade-in">
            <div class="game-header"><h2 class="game-title color-versus">Battle</h2><div id="versus-round-display" class="digital-timer" style="font-size:1rem;">Round 1</div></div>
            <div id="versus-opponent-status" class="opponent-status-bar" style="background:rgba(156, 136, 255, 0.1); color:var(--primary-multi); border-color:rgba(156, 136, 255, 0.2);">Waiting for answers...</div>
            <div class="single-color-display"><div id="versus-question-color" class="color-box large-box"><span class="overlay-text">?</span></div></div>
            <div class="slider-container glass-panel">
                <div class="slider-row"><label class="label-r">R</label><input type="range" id="versus-R" class="custom-range range-r" min="0" max="255" value="128"><span id="versus-val-R" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-g">G</label><input type="range" id="versus-G" class="custom-range range-g" min="0" max="255" value="128"><span id="versus-val-G" class="val-num">128</span></div>
                <div class="slider-row"><label class="label-b">B</label><input type="range" id="versus-B" class="custom-range range-b" min="0" max="255" value="128"><span id="versus-val-B" class="val-num">128</span></div>
            </div>
            <button id="versus-guess-btn" class="main-action-btn" onclick="VersusGame.submitGuess()">GUESS</button>
            <p id="versus-wait-msg" class="hidden" style="text-align:center; color:#888;">Waiting for others...</p>
        </section>

        <section id="screen-versus-result" class="screen fade-in result-screen">
            <div class="game-header"><h2 class="game-title color-versus">Versus</h2></div>
            
            <h2 id="versus-result-title" class="result-title-style">ROUND WINNER!</h2>
            <div id="versus-final-winner" class="hidden winner-declare"></div>
            
            <div id="versus-result-container"></div>

            <div style="text-align:center; font-family:var(--font-mono); font-size:0.8rem; margin-top:20px; margin-bottom:10px; color:#888;">GOAL: <span id="versus-goal-val" style="color:#fff; font-weight:bold;">5</span></div>

            <div class="multi-compare-wrapper">
                <div class="multi-compare-target">
                    <p class="versus-compare-label" style="color:#fff; font-size:0.9rem;">TARGET</p>
                    <div id="versus-ans-color" class="mini-box large-target-box"></div>
                    <span id="versus-ans-text" class="rgb-value-text"></span>
                </div>
                <div id="versus-players-compare" class="versus-players-wrapper"></div>
            </div>

            <div class="modal-buttons">
                <button id="versus-continue-btn" onclick="VersusGame.voteContinue()" class="btn-primary"><span class="btn-icon">▶</span> CONTINUE</button>
                <button id="versus-exit-btn" onclick="VersusGame.confirmExit()" class="btn-text">Exit Room</button>
            </div>
            <p id="versus-continue-status" style="color:#888; font-size:0.8rem; margin-top:-10px; min-height:1.2em;"></p>
        </section>

    </main>

    <footer class="app-footer">
        <div style="margin-bottom: 12px; display:flex; gap:8px; justify-content:center; align-items:center; flex-wrap: wrap;">
            <button class="footer-btn privacy-link" onclick="AppController.showPolicy()">
                <span style="font-size:1rem;">🔒</span> Privacy
            </button>
            
            <a href="https://www.buymeacoffee.com/takutonkatsu" target="_blank" class="footer-btn bmc-link">
                <span style="font-size:1.1rem;">☕</span> Support Dev
            </a>
        </div>
        <div class="copyright" onclick="AppController.startGameMode('anotherworld')">&copy; 2023-2026 Takutonkatsu</div>
    </footer>
    
    <canvas id="share-canvas" width="1200" height="800" style="display:none;"></canvas>

    <div id="tutorial-overlay" class="tutorial-screen hidden">
        <button id="tut-skip-btn" class="tut-skip" onclick="Tutorial.skip()">SKIP ►</button>
        
        <div id="tut-phase-1" class="tut-content">
            <div class="tut-logo">
                <img src="Retina_icon.png" alt="logo" class="tut-logo-img">
                <span class="tut-logo-text">Retina</span>
            </div>
        </div>
        
        <div id="tut-phase-2" class="tut-content hidden">
            <h2 class="tut-subtitle" style="margin-bottom:20px; display:block;">Match the Color.</h2>
            
            <div class="tut-demo-container">
                <div id="tut-target-box" class="tut-target-box">
                    <span class="overlay-text">?</span>
                    <span class="tut-label-overlay">TARGET</span>
                </div>
                <div id="tut-user-box" class="tut-user-box">
                    <span class="tut-label-overlay">YOU</span>
                </div>
            </div>
            <div class="tut-controls-wrapper glass-panel">
                <div class="slider-row">
                    <label class="label-r">R</label>
                    <input type="range" id="tut-range-r" class="custom-range range-r" min="0" max="255" value="0">
                    <span id="tut-val-r" class="val-num">0</span>
                </div>
                <div class="slider-row">
                    <label class="label-g">G</label>
                    <input type="range" id="tut-range-g" class="custom-range range-g" min="0" max="255" value="0">
                    <span id="tut-val-g" class="val-num">0</span>
                </div>
                <div class="slider-row">
                    <label class="label-b">B</label>
                    <input type="range" id="tut-range-b" class="custom-range range-b" min="0" max="255" value="0">
                    <span id="tut-val-b" class="val-num">0</span>
                </div>
            </div>
            <div id="tut-guide-text" class="tut-guide"></div>
        </div>

        <div id="tut-phase-3" class="tut-content hidden">
            <div class="tut-logo" style="margin-bottom: 0px;">
                <img src="Retina_icon.png" alt="logo" class="tut-logo-img">
            </div>
            <h1 class="tut-finale">Let's Enjoy<br><span class="highlight">Retina</span></h1>
        </div>
    </div>

    <div id="custom-alert-modal" class="custom-modal-overlay hidden">
        <div class="custom-modal-box">
            <p id="custom-alert-text"></p>
            <div class="custom-modal-actions"><button id="custom-alert-ok" class="void-btn btn-set" style="font-size:1rem; padding:10px 20px;">OK</button></div>
        </div>
    </div>
    <div id="custom-confirm-modal" class="custom-modal-overlay hidden">
        <div class="custom-modal-box">
            <p id="custom-confirm-text"></p>
            <div class="custom-modal-actions">
                <button id="custom-confirm-yes" class="void-btn btn-set" style="font-size:1rem; padding:10px 20px;">YES</button>
                <button id="custom-confirm-no" class="void-btn btn-del" style="font-size:1rem; padding:10px 20px;">NO</button>
            </div>
        </div>
    </div>

    <div id="policy-modal" class="custom-modal-overlay hidden">
        <div class="custom-modal-box policy-box">
            <div class="policy-header">
                <h3 class="policy-title">SYSTEM POLICY</h3>
            </div>
            
            <div class="policy-content">
                <h4>1. 免責事項 (Disclaimer)</h4>
                <p>本アプリはエンターテインメントを目的としたゲームであり、医学的な色彩感覚や色覚の検査・診断を目的としたものではありません。本アプリの結果を医学的判断の根拠にしないでください。</p>
                <p>本アプリの利用により生じた損害について、開発者は一切の責任を負いません。</p>
                
                <h4>2. プライバシー (Privacy)</h4>
                <p>本アプリでは、利用状況の分析とサービス向上のため、Google Analyticsを使用しています。データは匿名で収集され、個人を特定するものではありません。</p>
                <p>Versusモード（対戦機能）では、ゲーム進行のためにGoogle Firebaseを使用し、一時的にプレイデータ（ニックネーム、スコア等）をサーバーに保存しますが、これらのデータはゲーム終了後に削除、または一定期間後に破棄されます。</p>
                
                <h4>3. 禁止事項 (Prohibitions)</h4>
                <p>サーバーへの過度な負荷をかける行為、不正な手段でのスコア改ざん、他者への迷惑行為を禁止します。</p>
                
                <h4>4. 著作権 (Copyright)</h4>
                <p>本アプリ内の画像、プログラム等のコンテンツの著作権はTakutonkatsuに帰属します。</p>
            </div>
            
            <div class="policy-footer">
                <button class="btn-policy-close" onclick="document.getElementById('policy-modal').classList.add('hidden')">CLOSE</button>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>